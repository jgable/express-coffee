// Generated by CoffeeScript 1.4.0
var Users, config, connect, mongoose;

mongoose = require("mongoose");

Users = require("./users")[0];

config = require("../config");

connect = function(dbUrl) {
  var state, _ref, _ref1;
  if (dbUrl == null) {
    dbUrl = config.dbServer;
  }
  state = mongoose != null ? (_ref = mongoose.connection) != null ? (_ref1 = _ref.db) != null ? _ref1._state : void 0 : void 0 : void 0;
  if (!state || (state !== "connected" && state !== "connecting")) {
    return mongoose.connect(dbUrl);
  }
};

module.exports = {
  Users: Users,
  connect: connect
};
